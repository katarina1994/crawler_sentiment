#!/usr/bin/env python
# -*- coding: utf-8 -*- 

'''
Created on 23. ozu 2018.

@author: Katarina123
'''


import glob
import os
#import gensim
import codecs
#from gensim import corpora, models
from sklearn.feature_extraction.text import CountVectorizer
#from sklearn.datasets import fetch_20newsgroups
from sklearn.decomposition import LatentDirichletAllocation



def printTopicInfo(model, featureNames, noKeyWords, originalStemmedDocuments):
    
    for tID, topic in enumerate(model.components_):
        listOfOriginalWords = []
        for i in topic.argsort()[:-noKeyWords - 1:-1]:
            #print (featureNames[i])
            for line in originalStemmedDocuments:
                line = line.split(" ")
                if(len(line) > 1):
                    if(featureNames[i] == line[1].lower()):
                        #print (featureNames[i], line[0].lower())
                        listOfOriginalWords.append(line[0])
                        break
        print (" ".join(listOfOriginalWords))
        listOfOriginalWords = []

#doc1 = "O mogućim prijevremenim izborima nisam nikada razgovarao s Andrejem Plenkovićem. Nije mi to ni spomenuo - kaže za Globus Ivan Vrdoljak, za mnoge uz premijera i stup sadašnje Vlade za koju čelnik HNS-a tvrdi da je “dobra”, ali da je dobila packu od Europske komisije. “Treba to ozbiljno shvatiti”, poručio je stranačkim kolegama na tradicionalnom okupljanju vodstva stranke koje je ovaj put održano u Tuheljskim toplicama protekloga vikenda.Vrdoljak ima čudnovato iskustvo, bio je među najbližim suradnicima Zorana Milanovića, a sada je i Plenkoviću, iako zbog raznih razloga nije, bar ne još do sada, ušao u Vladu. Kaže, nisam nikada tajno pregovarao s Tomislavom Karamarkom, ali s njegovim nasljednikom, danas šefom HDZ-a i premijerom, očito, jest. Dogovor koji je stvorio koaliciju kojoj leđa čuva i Milorad Pupovac dobro se drži, ali pravi izazovi tek predstoje. Ono što se mnogima čini da je Plenkovićeva prednost, vrhunsko obrazovanje, uglađenost, europejstvo, kulturno ophođenje, istinska želja da demokratizira i HDZ i Hrvatsku, na ovim skliskim balkanskim terenima brzo se može pretvoriti u opterećenje. To iskusni Ivan Vrdoljak dobro zna, pogotovo što i ekonomija baš ne ide kako bi trebalo, pa diplomatski uljuđeno, ali ipak posve jasno kaže da je posljednji izvještaj iz Bruxellesa na neki način i opomena Vladi.Mediji su posljednjih dana kalkulirali da Andrej Plenković razmišlja o izvanrednim izborima. Imate li o tome nekih saznanja?- Ovo je dobra i stabilna Vlada, zato danas mislim isto što sam mislio i kada smo ušli u hrvatsku Vladu s HDZ-om, a to je da svaki izlazak na prijevremene izbore koji ne nudi alternativu, a jamči destabilizaciju demokratskoga sustava nije dobro rješenje za Hrvatsku. Mislim da danas nije trenutak za to i da je puno prioritetnija tema završetak procesa stabilizacije Agrokora, ozbiljna gospodarska politika koja treba privući investicije.Dakle, s premijerom o tome niste razgovarali?- Nisam, ta tema uopće nije bila na stolu.Protekli vikend imali ste neku vrstu “inventure” u Tuheljskim toplicama, a stalno se u oporbi spominje kako se HNS izgubio u ovoj koaliciji, da će ga HDZ progutati i da ga na izborima, kada god oni budu, čekaju crni dani. Je li vaš dojam da je HNS izgubio odlukom da koalira s HDZ-om?- Teza je potpuno promašena, a to potvrđuje naš izborni rezultat, naše članstvo i naši rezultati u upravljanju i na lokalnoj i na nacionalnoj razini. HNS je izbor svih onih koji ne nasjedaju na populizam, nego očekuju odgovornost i pametne javne politike. I u Tuheljskim toplicama je i meni i cijelom vodstvu stranke potvrđeno kako su naši članovi i simpatizeri prihvatili odluku da izbjegnemo treće izbore i stabiliziramo politički sustav Hrvatske. Ali sigurno nam neće oprostiti sporost reformi i manjak rezultata ove Vlade. Zato imamo fokus na rezultat i siguran sam da ćemo ga u konačnici ostvariti, a da će građani to prepoznati.Da se malo vratimo unatrag, kako je uopće došlo do toga da se HNS odmakne od SDP-a, a dojam je da ste još za vrijeme Tomislava Karamarka stvarali platformu za suradnju s HDZ-om. Nikada to niste dokraja objasnili i je li točno da ste s Karamarkom razgovarali o suradnji dviju stranaka?- Ta je teza krenula kada sam bio izabran za predsjednika HNS-a jer sam na izbornom saboru rekao kako je HNS građanski centar potpuno jednako udaljen i od lijeve i od desne strane. Jedan dio novinara i javnosti je zaključio da tu otvaram mogućnost suradnje s HDZ-om. Mi nismo o tome ni razgovarali s HDZ-om, to nije uopće bila tema jer smo bili uvjereni da će se vrlo brzo stabilizirati sustav nakon pobjede na izvanrednim izborima. Ali i dalje stojim iza svojih riječi da smo mi građansko-liberalni centar potpuno jednako udaljeni i od lijeve i od desne strane i od njih će ovisiti koliko će se nama približiti svojom politikom i koliko će biti spremni na suradnju s nama.Dakle, nikakvih tajnih razgovora s Karamarkom nije bilo?- Ne, nije bilo tajnih razgovora, jer tadašnji HDZ s Karamarkom na čelu nam nije bio prihvatljiv koalicijski partner.A kada je bio onaj presudni okidač kada ste otišli od SDP-a i pristali na koaliciju s HDZ-om?- U onom trenutku kad je bilo jasno da idemo na treće izbore u godinu dana da bi se ponovno politika bavila sama sobom, umjesto da se bavi gorućim problemima Hrvatske - od Agrokora i ugrožene turističke sezone do povlačenja bespovratnih sredstava iz EU fondova, što sve ima izravni utjecaj na naš BDP, a time i na živote svih građana. Nitko iz opozicije nije bio spreman preuzeti odgovornost za Hrvatsku, već se svatko brinuo o svome imidžu, ne razmišljajući da Hrvatska ide prema novoj i još ozbiljnijoj krizi. Mi smo se tada odlučili pokazati da smo drukčiji i spremni na promjene koje će rezultirati stabilizacijom i odgovornosti prema svojoj zemlji.Nedostaju li vam iz ove današnje pozicije Vesna Pusić, Anka Mrak-Taritaš i drugi bivši istaknuti članovi HNS-a?- Meni je žao što su oni otišli i više bih volio da su danas s nama, ali se u tom njihovu odlasku otvorio veliki prostor za nove mlade ljude. Navest ću samo neke - Marija Puh, Ivan Gulam, Dubravko Ponoš… Oni su sada potpredsjednici i istaknuti članovi, a da se sve to nije dogodilo, teško da bi imali taj politički prostor. Tako da njihov odlazak ne gledam kao nedostatak, nego kao šansu za nove, mlade, ambiciozne ljude.Imate li sa svojim starim članovima neke kontakte, pozdravljate li se, razgovarate?- Da, kada se sretnemo ljudski razgovaramo.Nedavno ste govorili o suradnji koju ste imali s Milanovićem i sada Plenkovićem, rekavši da je bivši premijer omogućio veći manevarski prostor ministrima, a sadašnji voli sve kontrolirati. Kakva je zapravo suradnja s Plenkovićem?- Suradnja je zadovoljavajuća unatoč našim razlikama. Povezuje nas fokus na rezultate Vlade. I oni i mi znamo da građanima moramo isporučiti obećane reforme.Međutim, umjesto da se životne teme stavljaju u prvi plan, sada se opet vrtimo oko Istanbulske konvencije, koja sigurno neće ni pomoći ni odmoći da hrvatski građani bolje žive?- Točno, to sam u više navrata govorio i javno i među svojim članstvom. Dok je fokus javnosti na Istanbulskoj konvenciji, teme od kojih građani žive, nažalost, padaju u drugi plan. Naš stav je uvijek bio posve jasan - svi članovi kluba HNS-a glasat će za ratifikaciju Konvencije, upravo da bismo tu temu zatvorili i vratili u prvi plan reformu obrazovanja, privlačenje investicija i otvaranje novih radnih mjesta.Mislite li da ratifikacija ipak može zakomplicirati politički život i hoće li dodatna izjava biti dovoljna da se približe stavovi tvrđe desnice u HDZ-u i lijevog spektra?- Nemamo nikakvih problema po tom pitanju, a osobno vjerujem da je i HDZ spreman biti moderna europska konzervativna stranka, što podrazumijeva neke trendove koji se i u Europi događaju kod demokršćana.Je li vas HDZ ili Plenković informirao ili uključio u pisanje posebne izjave?- Za sada ne, oni završavaju konzultacije unutar stranke i očekujem za nekoliko dana taj prijedlog. Ali, ne, nismo uključeni u unutarstranačke razgovore.Jedan od glavnih motiva da HNS uđe u ovu koaliciju bila je brža i efikasnija provedba reforme obrazovanja. Međutim, nekih vidljivih pomaka još nema?- Pomaka itekako ima, a to pokazuju rezultati u ovih osam mjeseci koliko smo u Vladi. Napravljeno je daleko više nego što je hrvatsko obrazovanje uspjelo postići godinama prije. Došli smo nadomak početka primjene kurikularne reforme, pilot-faza kreće već za pet mjeseci. U skladu s preporukom Europske komisije usvojili smo zakone o strukovnom obrazovanju, svi su novi kurikulumi gotovi, revizije su gotove i počinje eksperimentalni program na jesen. Osigurali smo i novac iz fondova EU za provedbu reforme, milijardu kuna za reformu strukovnog obrazovanja i 200 milijuna kuna za provedbu kurikularne reforme. Uveli smo informatiku kao obavezni predmet i sve nabrojeno govori koliko smo posla uspjeli napraviti u samo osam mjeseci. Ali to nas neće uspavati, želimo nastaviti tim tempom.Neće li se priča o Istanbulskoj konvenciji, gdje se vidi podijeljenost hrvatskog društva, reflektirati i na reformu obrazovanja kada dođu osjetljive teme i pitanja na dnevni red?- Reforma obrazovanja temelj je i šansa da Hrvatska bude razvijena europska zemlja, pa ne očekujem to. U reformi obrazovanja nema i ne smije biti ideologije. Naravno da dio hrvatskog društva želi da sve ostane isto ili da idemo nazad, i to iz partikularnih, a ne ideoloških interesa, ali vjerujem da smo kao društvo to davno prerasli.HNS se postavio i prema izvješću Europske komisije da Hrvatska ipak nije ostvarila briljantne gospodarske rezultate o kojima Vlada često govori i da zaostajemo za članicama EU?- Mi to izvješće smatramo vrlo ozbiljnim, kao konstruktivnu kritiku Vladi i poticaj da se svi zajedno trebamo usredotočiti da se reformski procesi u Hrvatskoj ubrzaju. Komisija je istaknula dobre makroekonomske pokazatelje, smanjenje javnog duga, pa čak i rast koji je danas zadovoljavajući, ali ne prati hrvatske potencijale. Mislim da Hrvatska može imati rast ne od 2,8 posto, nego 3,5, 4, 4,5 posto kada bismo iskoristili sve potencijale. To izvješće nam šalje poruku da je jedan dio našeg posla solidno odrađen, ali niz drugih tema ne ide dovoljno brzo. Pohvalili su ono što se zadnjih osam mjeseci događa u obrazovanju, i to je nama poticaj da ne samo u obrazovanju nego i u drugim ministarstvima brže nastavimo s radom.Znači li ovo izvješće opomenu da Vlada sporo radi?- Djelomično se i tako može zaključiti. Ali treba znati da je Vlada bila u djelomičnoj političkoj krizi u ljeto prošle godine, da je Agrokor uzeo dosta vremena i da se sada moramo fokusirati na važne teme. Ne bih rekao da je riječ o neefikasnoj Vladi, ona ima vremena pokazati da može biti brza i efikasna.Mislite li da bi u Vladi trebalo svježe krvi, promjene nekih ministara?- Ne bih se osobno reflektirao na bilo kojeg ministra, a što se tiče naša dva ministra, potpredsjednika Predraga Štromara i ministrice Blaženke Divjak, tu ne treba nikakve svježe krvi jer su oni pokazali da odlično rade.Kako procjenjujete finale oko Agrokora?- Očekujem da će do nagodbe doći do ljeta ove godine, a važno je da nastavi ne samo sustav Agrokora s radom, nego i svi oni dobavljači, proizvođači koji su bili dobrim dijelom naslonjeni na taj sustav. Želja mi je da nagodba rezultira srednjoročnim održivim planom poslovanja i zadržavanja radnih mjesta i proizvodnje.Jeste li kao jedan od ključnih ljudi u Milanovićevoj Vladi znali da se bliži kriza takvih razmjera u Agrokoru?- Do mene nisu dolazile takve informacije. Znalo se da su dosta zaduženi, ali u vrijeme Milanovićeve Vlade nije bilo nikakvih problema u financiranju sustava. Nisam zato uopće mogao predvidjeti što će slijediti.Hrvatska je pred velikim projektom izgradnje Pelješkog mosta, a postoje sumnje da su Kinezi, koji će najvjerojatnije graditi most, dali prenisku cijenu koja je nerealna. Može li to stvoriti nove probleme, što bi se moglo reflektirati i na ovu Vladu?- Ne vidim da će tu doći do problema. Bio je javni natječaj, sada državna komisija za javnu nabavu odlučuje o zakonitosti samog natječaja i nakon donošenja odluke očekujem realizaciju projekta. Sve firme koje su se javile daju sigurnost da će posao biti obavljen, a ne sumnjam tako ni da Kinezi ne bi završili taj posao. Ne očekujem nikakve probleme.Postoji još nekoliko kritičnih točaka za hrvatsko gospodarstvo, kriza u Uljaniku, Petrokemija, 3. maj...- To su teme o kojima se do sada nije dovoljno raspravljalo u javnosti. Cijeli brodograđevni sektor mora dobiti od Vlade model financiranja, jer ne postoji uspješna brodogradnja u svijetu koja nije podržana od razvojnih banaka i fondova. Imamo i otvorenu temu Petrokemije koja se treba u sljedećih nekoliko mjeseci završiti ulaskom strateških partnera i nastavkom proizvodnje. Očekujem da će sljedećih nekoliko mjeseci to biti u fokusu javnosti i rada Vlade, a tu vidim i vrlo aktivnu ulogu HNS-a.Dojam je da smo ostali po strani i kod budućih pravaca dostave plina. Hoće li to imati posljedice za Hrvatsku?- Nemamo mi taj problem. Danas imamo oko 50 posto svoje proizvodnje plina, što je, nažalost, u padu, ali za nekoliko mjeseci slijedi drugi krug natječaja za istraživanje i eksploataciju, što bi trebalo kroz nekoliko godina povećati proizvodnju. Imamo pred sobom realizaciju projekta LNG-a na Krku i, što se tiče energetske sigurnosti i konkurencije kad je riječ o cijenama, ne predviđam neke velike probleme.Dugo ste surađivali sa SDP-om, kako ocjenjujete sadašnje stanje u toj stranci, pogotovo kritike da je današnja oporba u Saboru nevidljiva?- Mislim da je čak i vidljiva, ali upitno je na kojim temama. Danas je u Saboru dominantno praviti predstave i dezavuirati samu instituciju parlamenta, a ne poticati pozitivni dijalog. Iskreno se nadam da će se to popraviti i da će se SDP konsolidirati, jer jak SDP je potreban Hrvatskoj.Mislite da se SDP može konsolidirati s Davorom Bernardićem na čelu?- Ne volim se baviti tuđim strankama jer svaki trenutak koristim da se bavim problemima građana, radom Vlade, svojom strankom, suradnicima, članstvom.Nisu predsjednički izbori blizu, ali se već o njima govori. Hoće li HNS podržati predsjednicu Kolindu Grabar-Kitarović ako se odluči na drugi mandat ili će imati svog kandidata?- Izbor predsjednika države važno je političko pitanje o kojem u HNS-u vodimo računa, ali danas nam to nije prioritetna tema. Sada su nam u fokusu mjere i rezultati ove Vlade.Nedavno je završilo s radom Povjerenstvo za prošlost, ali rezultati baš nisu bajni. Teško da će tako formulirani stavovi moći biti pretočeni u zakon, pa kakav je stav HNS-a o ustavnosti ili neustavnosti ustaškog pozdrava Za dom spremni?- Mi smo prije pola godine pričali o tome da nam je potrebnije povjerenstvo za suočavanje s budućnosti, a ne prošlosti. Ali, poštujemo i povjerenstvo koje je pokušalo dati neki svoj okvir kako gledati na neke povijesne teme. Ono što je svima u Hrvatskoj, ne samo nama u HNS-u, bitno jest da svako rješenje mora biti sukladno Ustavu i na tome ćemo inzistirati.Znači li to da nećete podržati stav Povjerenstva da neke iznimke mogu postojati?- Izuzeci od Ustava otvaraju Pandorinu kutiju koja nikome ne treba. Tada bi se našlo niz drugih tema i argumenata da se izuzmu iz ustavnosti. To nitko ne želi.Hrvatska se sve više susreće s populizmom i populističkim strankama. Koliko to može ugroziti politički sustav?- Tu Hrvatska nije ništa drugačija od drugih europskih zemalja. Populizam se prvo počeo pojavljivati na desnom spektru i dogodilo se da ljevica u svom odgovoru ode u lijevi populizam. HNS je izbor svih onih koji ne nasjedaju na populizam, nego očekuju odgovornost i pametne javne politike. Pred nama je vrijeme da se jasno artikulira da anarhisti kojih ima i u hrvatskoj politici mogu na nešto ukazivati, ali ne daju i rješenja. A mi trebamo rješenja, a ne jeftini populizam.Bulj vas je prije nekoliko dana oštro kritizirao. Imaju li te kritike pokriće?- Pametni i ozbiljni ljudi bave se sobom i svojim idejama i rezultatima. Oni drugi, nesposobni, uglavnom se bave drugim političarima.Raste popularnost Živog zida, Most je tu, hoće li se trend njihove popularnosti nastaviti da se poremeti arhitektura na hrvatskoj političkoj sceni?- Više od ovoga ne očekujem. Prije svega zbog toga što očekujem da će ova Vlada dati rezultate i dokaz kako ozbiljna politika treba voditi zemlju.Jutarnji listCopyright © HANZA MEDIA d.o.o. Sva prava pridržana.IzdvajamoNajčitanijeIz drugih medija      "
# compile documents
#documents = [doc1]

# GET ALL STOPWORDS FROM CROATIAN LANUGAGE
stopWords = []
fStopWords = codecs.open("C:/Users/Katarina123/workspace/textChanges/textCroatian/stopWords.txt", 'r', encoding='Windows-1250')
tmp = fStopWords.readlines()
for w in tmp:
    w = w.strip("\n")
    stopWords.append(w)
fStopWords.close()

# TIME TO WORK WITH EACH ARTICLE AND GET KEY WORDS FROM IT
documents = []
originalStemmedDocuments = []
path = "C:/Users/Katarina123/workspace/CroatianStemmer/CroatianStemmer/stemmedWords/"
for fileName in glob.glob(os.path.join(path, '*.txt')):
    f = open(fileName, "r");
    doc = ""
    docOriginal = ""
    for line in f.readlines():
        line = line.strip(" ").strip("\t").strip("\n").strip("\r").strip()
        originalStemmedDocuments.append(line)
        lineSplitted = line.split(" ")
        if(len(lineSplitted) == 1):
            docOriginal += lineSplitted[0].strip("\n")
            docOriginal += " "
            doc += lineSplitted[0].strip("\n")
            doc += " "
        else:
            docOriginal += lineSplitted[0].strip("\n")
            docOriginal += " "
            doc += lineSplitted[1].strip("\n")
            doc += " "
          
    documents = [doc]

    # LDA
    tf_vectorizer = CountVectorizer(max_df=2, min_df=1, max_features=100, stop_words=stopWords, analyzer='word')
    tf = tf_vectorizer.fit_transform(documents)
    tf_feature_names = tf_vectorizer.get_feature_names()

    # Run LDA
    lda = LatentDirichletAllocation(n_topics=1, max_iter=5, learning_method='online', learning_offset=50.,random_state=0).fit(tf)

    noKeyWords = 20
    printTopicInfo(lda, tf_feature_names, noKeyWords, originalStemmedDocuments)

    documents = []
    originalStemmedDocuments = []

